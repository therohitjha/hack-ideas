(this["webpackJsonphack-ideas"]=this["webpackJsonphack-ideas"]||[]).push([[0],{28:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),s=n(15),r=n.n(s),i=(n(28),n(9)),l=n(21),o=n(8),d=n.n(o),u=n(17),j=n(10),h=n(3),b=(n(30),n(0)),O=function(e){var t=e.data,n=t.id,a=t.author,c=t.title,s=t.body,r=t.tags,i=t.likes,l=t.dislikes,o=t.createdOn,d=e.handleUpvote,u=e.handleDownvote;o=new Date(o).toDateString();var j;return Object(b.jsxs)("div",{className:"tile-container",children:[Object(b.jsxs)("div",{className:"header",children:[Object(b.jsxs)("div",{className:"left-section",children:[Object(b.jsx)("h2",{children:c}),Object(b.jsxs)("div",{className:"profile",children:[Object(b.jsx)("div",{className:"avatar",children:Object(b.jsx)("span",{className:"initials",children:(j=a,j.split(" ").map((function(e){return e[0]})).join("").toUpperCase())})}),Object(b.jsx)("div",{className:"name",children:a})]})]}),Object(b.jsxs)("div",{className:"right-section",children:[Object(b.jsx)("div",{className:"like-btn",onClick:function(e){return d(e,n)},children:"likes"}),Object(b.jsx)("div",{className:"like-cnt",children:i})]}),Object(b.jsxs)("div",{className:"right-section",children:[Object(b.jsx)("div",{className:"like-btn",onClick:function(e){return u(e,n)},children:"Dislikes"}),Object(b.jsx)("div",{className:"like-cnt",children:l})]})]}),Object(b.jsxs)("div",{className:"content",children:[Object(b.jsx)("div",{className:"description",children:s}),Object(b.jsx)("div",{className:"tags",children:r.map((function(e,t){return Object(b.jsx)("div",{href:"#",children:e},"tag-".concat(t))}))})]}),Object(b.jsx)("div",{className:"footer",children:Object(b.jsxs)("div",{className:"created-date",children:["Created on ",Object(b.jsx)("strong",{children:o})]})})]})},v=(n(32),Object(a.forwardRef)((function(e,t){var n=e.handleChange,c=e.disable,s=Object(a.useRef)(),r=Object(a.useState)(""),i=Object(h.a)(r,2),l=i[0],o=i[1];return Object(a.useImperativeHandle)(t,(function(){return{value:function(){return s.current.value}}})),Object(b.jsxs)("div",{className:"sort-container",children:[Object(b.jsx)("label",{children:"Sort:"}),Object(b.jsx)("span",{className:"select-dropdown",children:Object(b.jsxs)("select",{ref:s,value:l,onChange:function(e){o(e.target.value),n({value:e.target.value})},disabled:c,children:[Object(b.jsx)("option",{value:"",children:"Sort"}),Object(b.jsx)("option",{value:"likes",children:"Likes"}),Object(b.jsx)("option",{value:"dislikes",children:"Dislikes"}),Object(b.jsx)("option",{value:"createdOn",children:"Created Date"})]})})]})}))),f=(n(33),function(e){var t=e.open,n=e.onClose,c=e.onCreate,s=Object(a.useState)(),i=Object(h.a)(s,2),l=i[0],o=i[1],d=Object(a.useState)(),u=Object(h.a)(d,2),j=u[0],O=u[1],v=Object(a.useState)(),f=Object(h.a)(v,2),p=f[0],m=f[1];return t?r.a.createPortal(Object(b.jsxs)("div",{className:"create-modal","data-testid":"modal",children:[Object(b.jsx)("div",{className:"overlay"}),Object(b.jsxs)("div",{className:"modal-wrapper",children:[Object(b.jsx)("div",{className:"header",children:Object(b.jsx)("h3",{"data-testid":"modal-header",children:"Create Challange"})}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c({title:l,body:j,tags:p.split(",")})},autoComplete:"false",id:"create-form",children:[Object(b.jsxs)("div",{className:"section",children:[Object(b.jsx)("label",{children:"Title"}),Object(b.jsx)("textarea",{name:"title",title:"Enter Title",value:l,onChange:function(e){return o(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"section",children:[Object(b.jsx)("label",{children:"Description"}),Object(b.jsx)("textarea",{rows:"5",title:"Enter Description",name:"description",value:j,onChange:function(e){return O(e.target.value)},required:!0})]}),Object(b.jsxs)("div",{className:"section",children:[Object(b.jsx)("label",{children:"Tags"}),Object(b.jsx)("textarea",{rows:"1",title:"Enter Tags",name:"tags",value:p,onChange:function(e){return m(e.target.value)},placeholder:"Add comma separated tags...",required:!0})]}),Object(b.jsxs)("div",{className:"footer",children:[Object(b.jsx)("button",{className:"close-btn",onClick:n,children:"Close"}),Object(b.jsx)("button",{title:"Save Challenge",className:"save-btn",children:"Save"})]})]})]})]}),document.body):null}),p=(n(34),function(e){var t=e.user,n=e.handleCreate,c=e.handleLogout,s=e.data,r=document.body,i=Object(a.useState)(!1),l=Object(h.a)(i,2),o=l[0],d=l[1],u=Object(a.useState)(!1),j=Object(h.a)(u,2),O=j[0],v=j[1],p=function(e){r.style.overflow=e?"hidden":"auto"},m=function(){d(!1),p(!1)};return Object(b.jsxs)("div",{className:"main-header",children:[Object(b.jsxs)("div",{className:"welcome-text",children:["Hello, ",t.name]}),Object(b.jsxs)("div",{className:"action-btns",children:[Object(b.jsxs)("span",{children:[Object(b.jsx)("button",{disabled:!!O,title:"Create Challenge",className:"create-btn",onClick:function(){var e=null===s||void 0===s?void 0:s.find((function(e){return e.empId===t.id}));(new Date).getTime()-(null===e||void 0===e?void 0:e.createdOn)>=864e5?(d(!0),p(!0),v(!1)):(alert("You have already created post in last 24 hours"),v(!0))},children:"Create"}),Object(b.jsx)(f,{open:o,onClose:m,onCreate:function(e){n(e),m()}})]}),Object(b.jsx)("span",{children:Object(b.jsx)("button",{title:"Logout",className:"logout-btn",onClick:c,children:"Logout"})})]})]})}),m=(n(35),void 0),x=Object(a.forwardRef)((function(e,t){var n=e.handleSearch,c=Object(a.useRef)(""),s=Object(a.useState)(!1),r=Object(h.a)(s,2),i=r[0],l=r[1];return Object(a.useImperativeHandle)(t,(function(){return{clear:function(){c.current.value=""},value:function(){return c.current.value}}})),Object(b.jsxs)("div",{className:"search-container",children:[Object(b.jsx)("input",{ref:c,type:"text",placeholder:"Search Challenges",onKeyUp:function(e,t){var n;return function(){for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];clearTimeout(n),n=setTimeout((function(){return e.apply(m,c)}),t)}}((function(){l(!!c.current.value),n({searchTerm:c.current.value})}),700)}),i&&Object(b.jsx)("span",{className:"clear-search",onClick:function(){c.current.value="",l(!1),n({searchTerm:""})},children:"\xd7"})]})})),g=n(2),k=function(){var e,t=Object(g.h)(),n=Object(a.useRef)(),c=Object(a.useRef)(),s=Object(a.useState)(!0),r=Object(h.a)(s,2),l=r[0],o=r[1],f=Object(a.useState)(!1),m=Object(h.a)(f,2),k=m[0],N=m[1],C=Object(a.useState)(null),y=Object(h.a)(C,2),S=y[0],w=y[1],I=Object(a.useState)(!0),D=Object(h.a)(I,2),T=D[0],E=D[1],U="Something wrong, please come back later...",L=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=S.filter((function(e){return e.id===n}))[0],S.some((function(e){return e.likesId.some((function(e){return e===n}))}))){e.next=8;break}return a.likes=(null===a||void 0===a?void 0:a.likes)+1,(c=a.likesId).push.apply(c,Object(u.a)(null===a||void 0===a?void 0:a.likesId).concat([n])),e.next=7,fetch("http://localhost:8000/challenges/".concat(n),{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 7:q();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(j.a)(d.a.mark((function e(t,n){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=S.filter((function(e){return e.id===n}))[0],S.some((function(e){return e.dislikesId.some((function(e){return e===n}))}))){e.next=8;break}return a.dislikes=(null===a||void 0===a?void 0:a.dislikes)+1,(c=a.dislikesId).push.apply(c,Object(u.a)(null===a||void 0===a?void 0:a.dislikesId).concat([n])),e.next=7,fetch("http://localhost:8000/challenges/".concat(n),{method:"PUT",body:JSON.stringify(a),headers:{"Content-Type":"application/json"}});case 7:q();case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R=function(){var e=Object(j.a)(d.a.mark((function e(n){var a,c,s,r,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=Object(i.a)(Object(i.a)({},n),{},{author:null===t||void 0===t||null===(a=t.state)||void 0===a||null===(c=a.user)||void 0===c?void 0:c.name,likes:0,dislikes:0,dislikesId:[],likesId:[],empId:null===t||void 0===t||null===(s=t.state)||void 0===s||null===(r=s.user)||void 0===r?void 0:r.id,createdOn:Date.now()}),e.next=3,fetch("http://localhost:8000/challenges",{method:"POST",body:JSON.stringify(l),headers:{"Content-Type":"application/json"}});case 3:q();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(j.a)(d.a.mark((function e(){var t,a,c,s,r=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:n.current.value(),o(!0),a="http://localhost:8000/challenges",t&&(a+="&q=".concat(t)),e.prev=4,e.next=7,fetch(a);case 7:if((c=e.sent).ok){e.next=10;break}throw Error("error in fetching challenges");case 10:return e.next=12,c.json();case 12:s=e.sent,E(!s.length),w(s||[]),o(!1),e.next=22;break;case 18:e.prev=18,e.t0=e.catch(4),o(!1),N(U);case 22:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){n.current.clear(),q()}),[]),Object(b.jsxs)("div",{className:"homepage",children:[Object(b.jsx)(p,{user:null===t||void 0===t||null===(e=t.state)||void 0===e?void 0:e.user,data:S,handleCreate:R,handleLogout:function(){sessionStorage.removeItem("hackUser"),window.location.href="/login"}}),Object(b.jsxs)("div",{className:"main-container",children:[l&&Object(b.jsx)("div",{className:"loader"}),k&&Object(b.jsx)("div",{className:"error-container",children:k}),Object(b.jsx)(x,{ref:n,handleSearch:function(e){return q(e.searchTerm)}}),Object(b.jsx)(v,{ref:c,disable:T,handleChange:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.current.value(),t=Object(u.a)(S);"likes"===e.value?(t.sort((function(e,t){return t.likes-e.likes})),w(t)):"dislikes"===e.value?(t.sort((function(e,t){return t.dislikes-e.dislikes})),w(t)):"createdOn"===e.value?(t.sort((function(e,t){return new Date(t.createdOn)-new Date(e.createdOn)})),w(t)):q()}}),S&&Object(b.jsxs)("div",{className:"challenges-container",children:[S.map((function(e,t){return Object(b.jsx)(O,{data:e,handleUpvote:L,handleDownvote:J},"tile".concat(t))})),!S.length&&Object(b.jsx)("div",{className:"no-challenges",children:"Oops, no challenges exist, Click 'Create' to add one."})]})]})]})},N=(n(44),function(){var e=Object(a.useState)(),t=Object(h.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),r=Object(h.a)(s,2),i=r[0],l=r[1],o=Object(g.g)(),u=function(){var e=Object(j.a)(d.a.mark((function e(t){var a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,fetch("http://localhost:8000/users/".concat(n));case 4:if((a=e.sent).ok){e.next=7;break}throw Error("Login error");case 7:return e.next=9,a.json();case 9:c=e.sent,sessionStorage.setItem("hackUser",JSON.stringify(c)),o.push({pathname:"/",state:{user:c}}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),l(!0);case 17:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("form",{onSubmit:u,children:[" ",Object(b.jsx)("div",{className:"login",children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("h3",{children:"Hack Ideas"}),Object(b.jsxs)("div",{className:"user-input",children:[Object(b.jsx)("label",{className:"user-label","data-tooltip":"Employee doesn't exist!",children:"Employee ID"}),Object(b.jsx)("input",{required:!0,type:"text",pattern:"[a-zA-Z]{1}[a-z-A-Z0-9]{3,12}",name:"employee-id",className:i?"error":"",onChange:function(e){return c(e.target.value)},placeholder:"Enter Employee ID",autoComplete:!1}),i&&Object(b.jsx)("p",{className:"error-text",children:"Invalid employee ID!"})]}),Object(b.jsx)("button",{type:"submit",children:"Login"})]})})]})}),C=n(14),y=function(e){var t=e.component,n=Object(l.a)(e,["component"]);return Object(b.jsx)(g.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return sessionStorage.getItem("hackUser")?Object(b.jsx)(t,Object(i.a)({},e)):Object(b.jsx)(g.a,{to:{pathname:"/login"}})}}))},S=function(e){var t=e.component,n=Object(l.a)(e,["component"]);return Object(b.jsx)(g.b,Object(i.a)(Object(i.a)({},n),{},{render:function(e){return sessionStorage.getItem("hackUser")?Object(b.jsx)(g.a,{to:{pathname:"/"}}):Object(b.jsx)(t,Object(i.a)({},e))}}))};var w=function(){return Object(b.jsx)(C.a,{children:Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(g.d,{children:[Object(b.jsx)(y,{exact:!0,path:"/hack-ideas/",component:k}),Object(b.jsx)(S,{exact:!0,path:"/login",component:N})]})})})};r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(w,{})}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.6a94de63.chunk.js.map